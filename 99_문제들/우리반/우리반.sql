-- 기존 테이블 삭제
DROP TABLE TBL_BUY CASCADE CONSTRAINTS;
DROP TABLE TBL_PRODUCT CASCADE CONSTRAINTS;
DROP TABLE TBL_CUSTOM CASCADE CONSTRAINTS;


-- 고객 테이블
CREATE TABLE TBL_CUSTOM (
	CUSTOM_ID VARCHAR2(20) PRIMARY KEY ,  
	NAME VARCHAR2(40) NOT NULL,		
	EMAIL VARCHAR2(40),
	AGE NUMBER(3) DEFAULT 0,
	REG_DATE DATE DEFAULT SYSDATE 
);

INSERT INTO TBL_CUSTOM 
VALUES ( 'mina012', '김미나', 'kimm@gmail.com', 20, TO_DATE('2022-03-10 14:23:25','yyyy-mm-dd hh24:mi:ss'));
INSERT INTO TBL_CUSTOM 
VALUES ('hongGD', '홍길동', 'gil@korea.com', 32, TO_DATE('2021-10-21 11:12:23','yyyy-mm-dd hh24:mi:ss'));
INSERT INTO TBL_CUSTOM 
VALUES ( 'twice', '박모모', 'momo@daum.net', 29, TO_DATE('2021-12-25 19:23:45','yyyy-mm-dd hh24:mi:ss'));
INSERT INTO TBL_CUSTOM (CUSTOM_ID, NAME, EMAIL)
VALUES ( 'wonder', '이나나', 'lee@naver.com');

-- 상품 테이블 

CREATE TABLE TBL_PRODUCT(
	PCODE VARCHAR2(20) PRIMARY KEY ,
	CATEGORY CHAR(2) NOT NULL,
	PNAME VARCHAR2(40) NOT NULL,
	PRICE NUMBER(9) NOT NULL 
);
INSERT INTO TBL_PRODUCT TP 
VALUES ('DOWON123A', 'B2', '동원참치선물세트', 54000);
INSERT INTO TBL_PRODUCT TP 
VALUES ('CJBAB12G', 'B1', '햇반 12개입', 14500);
INSERT INTO TBL_PRODUCT TP 
VALUES ('JINRMN5', 'B1', '진라면 5개입', 6350);
INSERT INTO TBL_PRODUCT TP 
VALUES ('APLE5KG', 'A1', '청송사과 5kg', 66000);
INSERT INTO TBL_PRODUCT TP 
VALUES ('MANGOTK4R', 'A2', '애플망고 1kg', 32000);


-- 구매 테이블 
CREATE TABLE TBL_BUY(
	BUY_IDX NUMBER(8) PRIMARY KEY ,		
	CUSTOMID VARCHAR2(20) NOT NULL ,		
	PCODE VARCHAR2(20) NOT NULL ,
	QUANTITY NUMBER(5) DEFAULT 1 ,		
	BUY_DATE DATE,
    FOREIGN KEY (CUSTOMID) REFERENCES TBL_CUSTOM(CUSTOM_ID),
	FOREIGN KEY (PCODE) REFERENCES TBL_PRODUCT(PCODE)
);


INSERT INTO TBL_BUY 
VALUES (1001, 'mina012' , 'CJBAB12G' , 5, TO_DATE('2022-03-10 14:33:15','yyyy-mm-dd hh24:mi:ss'));
INSERT INTO TBL_BUY 
VALUES (1002, 'mina012' , 'APLE5KG' , 2, TO_DATE('2023-11-10 14:33:15','yyyy-mm-dd hh24:mi:ss'));
INSERT INTO TBL_BUY 
VALUES (1003, 'mina012' , 'JINRMN5' , 2, TO_DATE('2023-12-09 14:33:15','yyyy-mm-dd hh24:mi:ss'));
INSERT INTO TBL_BUY 
VALUES (1004, 'twice' , 'JINRMN5' , 3 , TO_DATE('2023-12-21 14:33:15','yyyy-mm-dd hh24:mi:ss'));
INSERT INTO TBL_BUY 
VALUES (1005, 'twice' , 'MANGOTK4R' , 2 , TO_DATE('2024-01-10 14:33:15','yyyy-mm-dd hh24:mi:ss'));
INSERT INTO TBL_BUY 
VALUES (1006, 'hongGD' , 'DOWON123A' , 1 , TO_DATE('2024-01-13 14:33:15','yyyy-mm-dd hh24:mi:ss'));
INSERT INTO TBL_BUY 
VALUES (1007,  'hongGD' , 'APLE5KG' , 1 , TO_DATE('2023-09-09 14:33:15','yyyy-mm-dd hh24:mi:ss'));

COMMIT;